# ç®—æ³•é”™é¢˜æœ¬

è®°å½•åœ¨åˆ·é¢˜è¿‡ç¨‹ä¸­é‡åˆ°çš„å…¸å‹é”™è¯¯ã€é€»è¾‘æ¼æ´åŠ JavaScript è¯­è¨€ç‰¹æ€§å¯¼è‡´çš„å‘ã€‚

---

## [23. åˆå¹¶ K ä¸ªå‡åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-k-sorted-lists/)

### âŒ é”™è¯¯ä»£ç ç‰‡æ®µ (åˆ†æ²»æ³•)

```javascript
var solve = (lists, left, right) => {
    if(left === right) return lists[left];
    let mid = (left + right) / 2; // é”™è¯¯ 1
    let l1 = solve(lists, left, mid - 1); // é”™è¯¯ 2
    let l2 = solve(lists, mid + 1, right);
    return mergeLists(l1, l2);
}

var mergeLists = (list1, list2) => {
    if(list1 === null || list2 === null) return null; // é”™è¯¯ 3
    let dummy = new ListNode(-1);
    let prev = dummy;
    while(list1 || list2){ // é”™è¯¯ 4
        if(list1.val < list2.val){
            // ...
        }
    }
}
```

### ğŸ” é”™è¯¯åˆ†æ

#### 1. JavaScript æ•°å€¼é™¤æ³•ä¸è‡ªåŠ¨å–æ•´
*   **ç°è±¡**ï¼š`let mid = (left + right) / 2;` åœ¨ `left=0, right=1` æ—¶ç»“æœæ˜¯ `0.5`ã€‚
*   **åæœ**ï¼š`lists[0.5]` ä¸º `undefined`ï¼Œä¸”é€’å½’åŒºé—´è®¡ç®—ä¼šé™·å…¥æ··ä¹±æˆ–æ­»å¾ªç¯ã€‚
*   **æ•™è®­**ï¼šJS ä¸­åšç´¢å¼•è®¡ç®—åŠ¡å¿…ä½¿ç”¨ `Math.floor()` æˆ– `~~` (æŒ‰ä½é) å–æ•´ã€‚

#### 2. äºŒåˆ†é€’å½’åŒºé—´æ¼æ‰ä¸­ç‚¹
*   **ç°è±¡**ï¼šåˆ’åˆ†åŒºé—´ä¸º `[left, mid - 1]` å’Œ `[mid + 1, right]`ã€‚
*   **åæœ**ï¼šç´¢å¼•ä¸º `mid` çš„é‚£ä¸ªé“¾è¡¨ç›´æ¥è¢«ä¸¢å¼ƒäº†ï¼Œç»“æœä¸å®Œæ•´ã€‚
*   **æ­£ç¡®åšæ³•**ï¼šæ ‡å‡†äºŒåˆ†åº”ä¸º `[left, mid]` å’Œ `[mid + 1, right]`ã€‚

#### 3. åˆå¹¶é“¾è¡¨åŸºå‡†æƒ…å†µå¤„ç†é”™è¯¯
*   **ç°è±¡**ï¼š`if(list1 === null || list2 === null) return null;`
*   **åæœ**ï¼šå¦‚æœ A é“¾è¡¨æœ‰å€¼ï¼ŒB é“¾è¡¨ä¸ºç©ºï¼Œæœ¬åº”è¿”å› Aï¼Œç»“æœè¿”å›äº† `null`ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚
*   **æ­£ç¡®åšæ³•**ï¼š`if (!list1) return list2; if (!list2) return list1;`

#### 4. å¾ªç¯æ¡ä»¶ä¸ç©ºæŒ‡é’ˆè®¿é—®
*   **ç°è±¡**ï¼š`while(list1 || list2)` é…åˆå†…éƒ¨ `list1.val`ã€‚
*   **åæœ**ï¼šå½“ `list1` ä¸ºç©ºä½† `list2` è¿˜æœ‰å€¼æ—¶ï¼Œå¾ªç¯ç»§ç»­ï¼Œæ‰§è¡Œ `list1.val` ä¼šæŠ›å‡º `TypeError: Cannot read property 'val' of null`ã€‚
*   **æ­£ç¡®åšæ³•**ï¼šä½¿ç”¨ `while(list1 && list2)` åªå¤„ç†å…¬å…±éƒ¨åˆ†ï¼Œå¾ªç¯ç»“æŸåä¸€æ¬¡æ€§è¿æ¥å‰©ä½™å°¾éƒ¨ï¼š`prev.next = list1 || list2;`

---

### âœ… æ­£ç¡®å®ç°

```javascript
var solve = (lists, left, right) => {
    if (left === right) return lists[left];
    let mid = Math.floor((left + right) / 2); // 1. å–æ•´
    let l1 = solve(lists, left, mid);         // 2. åŒ…å« mid
    let l2 = solve(lists, mid + 1, right);
    return mergeLists(l1, l2);
}

var mergeLists = (l1, l2) => {
    if (!l1) return l2; // 3. å¦¥å–„å¤„ç†ç©ºé“¾è¡¨
    if (!l2) return l1;
    let dummy = new ListNode(-1);
    let cur = dummy;
    while (l1 && l2) { // 4. åªæœ‰ä¸¤è€…éƒ½ä¸ä¸ºç©ºæ‰æ¯”è¾ƒ
        if (l1.val < l2.val) {
            cur.next = l1;
            l1 = l1.next;
        } else {
            cur.next = l2;
            l2 = l2.next;
        }
        cur = cur.next;
    }
    cur.next = l1 || l2; // 5. è¿æ¥å‰©ä½™å°¾éƒ¨
    return dummy.next;
}
```
